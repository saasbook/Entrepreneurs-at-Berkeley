class Team < ActiveRecord::Base
  validates :name, uniqueness: true
	validates :name, :password, presence: true

  belongs_to :leader, :class_name => "User", :foreign_key => "user_id"
  has_many :members, :class_name => "User"

  has_attached_file :image, styles: { medium: "300x300>", thumb: "100x100#" }, default_url: "data:image/png;base64,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"
  validates_attachment_content_type :image, content_type: /\Aimage\/.*\z/
  validates_attachment_size :image, :less_than => 5.megabytes

  #helper create_team method for testing and seeding
  def self.seed_team(leaders_email, team_name, team_password)
    team_leader = User.find_by email: leaders_email
    new_team = Team.create!(name: team_name, user_id: team_leader.id, password: team_password)
    team_leader.update!(team_id: new_team.id)
    return new_team
  end
end
